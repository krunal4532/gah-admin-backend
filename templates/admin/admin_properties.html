<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin - Properties</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"/>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background-color: #f9f9f9; }
    h1 { text-align: center; color: #333; }
    .property-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
    .property-card { background: white; padding: 10px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .property-card h3 { margin: 0 0 10px; font-size: 1.2em; color: #222; }
    .property-card .swiper { width: 100%; height: 200px; border-radius: 8px; overflow: hidden; }
    .property-card .swiper-slide img { width: 100%; height: 100%; object-fit: cover; }
  </style>
</head>
<body>
  <h1>Admin - Properties</h1>
  <div class="property-grid" id="propertyGrid"></div>

  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
  <script>
  async function fetchProperties() {
    const res = await fetch('/api/properties');
    const data = await res.json();
    const grid = document.getElementById('propertyGrid');
    data.forEach((p, index) => {
      const div = document.createElement('div');
      div.className = 'property-card';

      const swiperId = `swiper-${index}`;
      const slides = p.images.map(img =>
        `<div class='swiper-slide'><img src='${img}' style='width:100%;border-radius:6px;'/></div>`
      ).join("");

      div.innerHTML = `
        <h3>${p.name || 'Unnamed Property'}</h3>
        <p><strong>Location:</strong> ${p.location || '-'}</p>
        <p><strong>Bedrooms:</strong> ${p.bedrooms ?? '-'}</p>
        <p><strong>Guests:</strong> ${p.guests ?? '-'}</p>
        <p><strong>Beds:</strong> ${p.beds ?? '-'}</p>
        <p><strong>Baths:</strong> ${p.baths ?? '-'}</p>
        <p><strong>Price:</strong> ₹${p.price_per_night ?? '—'}</p>
        <p>${p.short_description || ''}</p>
        <div class="swiper" id="${swiperId}">
          <div class="swiper-wrapper">${slides}</div>
          <div class="swiper-pagination"></div>
        </div>
      `;

      grid.appendChild(div);

      new Swiper(`#${swiperId}`, {
        loop: true,
        pagination: { el: '.swiper-pagination' }
      });
    });
  }

  fetchProperties();
</script>
</body>
</html>
